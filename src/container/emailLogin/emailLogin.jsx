import React,{Component} from 'react'import {connect} from 'react-redux'import {Link} from 'react-router-dom'import {Toast} from 'antd-mobile'import LoginLogo from '../../components/loginLogo/loginLogo'import LoginHeader from '../../components/loginHeader/loginHeader'import LoginFooter from '../../components/loginFooter/loginFooter'import AlertTip from '../../components/alretTip/alretTip'import {login,alerTexts,cancelAlertShow} from "../../redux/actions";import './emailLogin.styl'class emailLogin extends Component{  state={    emailNum: '',    password:'',  }  toLogin = () => {    const {emailNum,password,isShowALert} = this.state    if (emailNum===''){      this.changeShow('邮箱不为空')      // 直接return不执行下面的      return    }else if (!/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(emailNum)){      this.changeShow('邮箱格式不正确')      // 直接return不执行下面的      return    }else if (password === ''){      this.changeShow('密码不为空')      // 直接return不执行下面的      return    }else if (!(/^.*(?=.{6,})(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*? ]).*$/).test(password)){      this.changeShow('最少6位，包括至少1个大写字母，1个小写字母，1个数字，1个特殊字符')      // 直接return不执行下面的      return    } else{      Toast.info('登录成功', 1);      this.props.history.replace('/personal/:phoneNumber')    }    this.props.login(true)    this.props.history.replace('/personal')  }  changeShow= (Texts)=>{    this.props.alerTexts(Texts)    this.props.cancelAlertShow(true)  }  handleChange= (name,event) =>{    this.setState({      [name]:event.target.value    })  }  render() {    const {isShowALert} = this.props.alerttiptext  return (    <div className='wrap'>      <LoginHeader/>      <LoginLogo/>      <div className="emailLoginContainer">        <form action="">          <div className="container">            <div className="inputbox">              <input type="email" placeholder='邮箱账号' onChange={(event)=>{this.handleChange('emailNum',event)}}/>                <i className='closeIcon'></i>            </div>            <div className="inputbox">                <input type="password" placeholder='密码' onChange={(event)=>{this.handleChange('password',event)}}/>                <i className='closeIcon'></i>            </div>            <div className="sendMsg">              <Link to='/register' className='register'>注册账号</Link>              <a >忘记密码</a>            </div>            <div className="loginbtn" onClick={this.toLogin}>              <span>登录</span>            </div>          </div>        </form>      </div>      <LoginFooter/>      {isShowALert? (<AlertTip/>):null}    </div>      )  }}export default connect(state=>({alerttiptext:state.alerttiptext,}),  {login,alerTexts,cancelAlertShow})(emailLogin)