/*geren */import React,{Component} from 'react'import {Link} from 'react-router-dom'import { Modal, Button, WhiteSpace, WingBlank, Toast} from 'antd-mobile'import {login} from '../../redux/actions'import './personal.styl'import {connect} from 'react-redux'import 'antd-mobile/dist/antd-mobile.css'const alert = Modal.alert;class Personal extends Component{    state = {      infos: [        {          name: '我的订单',        icon:'icon-dingdan'      },        {          name: '周六一起拼',        icon:'icon-rili'      },        {          name: '售后服务',        icon:'icon-shouhou'      },        {          name: '优惠卷',        icon:'icon-youhuiquan-01'      },        {          name: '我的红包',        icon:'icon-hongbao'      },        {          name: '优先购',        icon:'icon-youxiangou'      },        {          name: '礼品卡',        icon:'icon-weibiaoti2fuzhi04'      },        {          name: '积分中心',        icon:'icon-jifen'      },        {          name: '会员俱乐部',        icon:'icon-huiyuan'      },        {          name: '地址管理',        icon:'icon-dizhiguanli1'      },        {          name: '账号安全',        icon:'icon-anquan'      },        {          name: '联系客服',        icon:'icon-kefu'      },        {          name: '帮助中心',        icon:'icon-bangzhuzhongxin'      },        {          name: '意见反馈',        icon:'icon-fankui'      },],      username: [        {          name:'小强',          info: '超级VIP'        },        {          name:'李强东',          info: '普通VIP'        },        {          name:'普京',          info: '一般用户'        },        {          name:'小强',          info: '土豪'        },        {          name:'李彦宏',          info: '超级VIP'        },        {            name: '熊大',            info: '平民'        }],      isShowLogout: ''    }  loadingToast() {    Toast.loading('正在退出...', 1, () => {      console.log('正在退出，请稍后');    });  }  successToast() {    Toast.success('退出成功!!!', 1);  }  failToast() {    Toast.fail('已取消!!!', 1);  }  showAlert = () => {        const {isLogin} = this.props.userIslogin    const alertInstance = alert('退出登录', 'Are you sure???', [      { text: '取消', onPress: () => {console.log('取消'),this.failToast()}, style: 'default' },      { text: '退出登录', onPress: () =>{          this.props.login(false),            this.loadingToast()          setTimeout(()=>{            this.successToast()          },1000)        }      },    ]);  };  componentDidMount() {      const {isLogin} = this.props.userIslogin    console.log(isLogin)    this.setState({      isShowLogout:isLogin    })  }    render() {        const {infos,username,isShowLogout} = this.state        const index =  Math.floor((Math.random()*username.length))        console.log(this.props.userIslogin.isLogin)        return (          <div className='personalWrap'>            <section className="header">              <div className="myProfile">                {                  this.props.userIslogin.isLogin?(<div className="left">                    <img src={require('./images/avator.png')} alt="" />                    <div className="info">                      <div className="nickName"><span>{username[index].name}</span></div>                      <div className='memberTitle'><span>{username[index].info}</span></div>                    </div>                  </div>):(<Link to='/login'>                    <div className="left">                      <img src={require('./images/avator.png')} alt="" />                      <div className="info">                        <div className="nickName"><span>请登录</span></div>                        <div className='memberTitle'><span>您暂时不是VIP</span></div>                      </div>                    </div>                  </Link>)                }                <div className="right">                  <div className="bg">                    <div className="left">                      <i className='icon'></i>                    </div>                    <div className="right">                      <div className="top">                        超级会员                      </div>                      <div className="tryuse">                        <span>立即试用 <i className='arrow'></i></span>                      </div>                    </div>                  </div>              </div>          </div>            </section>            <section className="userMsg">        <ul>          {            infos.map((info,index) => {                const classname = `iconfont ${info.icon}`                return (                  <li key={index}>                    <div className="content">                      <i className={classname}></i>                      <div className="text">                        {info.name}                      </div>                    </div>                  </li>                )            })          }      </ul>    </section>            {              this.props.userIslogin.isLogin? (<WingBlank>                <Button                  onClick={this.showAlert}                  type="warning" inline size="large" style={{ marginRight: '4px',width:'100%'}}>退出登录</Button>              </WingBlank>): null            }        </div>        )    }}export default connect(  state => ({userIslogin:state.userIslogin}),{login})(Personal)